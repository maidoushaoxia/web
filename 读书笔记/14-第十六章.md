# 《JavaScript高级程序设计》读书笔记 #


## 第十六章 HTML5脚本编程 ##

---------------------
### 16.1 跨文档消息传递(XDM) ###
- 指的是在来自不同域的页面间传递消息,

- 核心是postMessage()方法:能向另一个地方(包含在当前页面中的`<iframe>`元素或者由当前页面弹出的窗口)传递数据.接收一条消息字符串和表示消息接收方来自哪个域的字符串.

- 接收XDM消息时,会触发window对象的message事件,此事件是异步的,因此可能会有延迟.触发message事件后,传递给onMessage处理程序的事件对象包含:
  - data:传入的字符串数据;
  - origin:发送消息的文档所在域;
  - source:发送消息的文档的window对象的代理.此代理对象主要用于在发送上一条消息的窗口调用postMessage()方法.如果发送消息的窗口来自同一个域,那此对象就是window.

### 16.2 原生拖放 ###
1. 拖放事件
  - 拖动某元素时,将依次触发下列事件:
    - dragstart;
    - drag;
    - dragend.

  - 当某个元素被拖放到一个有效的放置目标上时,会触发下列事件:
    - dragenter;
    - dragover;
    - dragleave 或drop.

2. 定义放置目标
  - 可以重写dragenter和dragover事件默认行为,将不允许放置的元素变为有效的放置目标.

3. dataTransfer对象
  - 是事件对象的一个属性,用于从被拖动元素向放置目标传递字符串格式的数据.主要有两个方法:
    - setData():第一个参数是数据类型,第二个参数是要传递的数据;
    - getData():只接受一个字符串,表示保存的数据类型,取值为"text"或"URL".

4.
