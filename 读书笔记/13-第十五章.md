# 《JavaScript高级程序设计》读书笔记 #


## 第十五章 使用Canvas绘图 ##
使用这个元素可以在页面中设定一个区域,并在区域中画图.

---------------------
### 15.1 基本用法 ###
  - 先设置width和height属性,指定可以绘图的区域大小.
  - 通过调用getContext()方法并传入上下文名字可以取得绘图上下文对象的引用.
  - 使用toDataURL()方法,可以导出绘制的图像,接收图像的类型格式.  

### 15.2 2D上下文 ### 
- 2D上下文的坐标起点为`<canvas>`元素的左上角,坐标为(0,0).x值越大说明越靠右,y值越大说明越靠下.
-------------
1. 填充和描边
 - 填充:fillStyle属性.

 - 描边:strokeStyle属性.

这两个属性的默认值都是"#000000",可以为其指定颜色(字符串形式).

2. 绘制矩形:三个方法都接收四个参数,分别是矩形左顶点的x坐标,y坐标,矩形的宽度和矩形的高度,单位都是像素.
  - fillRect()方法:会为绘制的矩形填充颜色,填充的颜色由fillStyle属性决定.

  - strokeRect()方法:会为绘制的矩形用指定的颜色描边,描边的颜色由strokeStyle属性决定.
    - lineWidth属性可以控制描边线条的宽度;
    - lineCap属性可以控制线条末端的形状是平头("butt"),圆头("round")还是方头("square").
    - lineJoin属性可以控制线条相交的方式是圆交("round"),斜交("bevel")还是斜接("miter").

  - clearRect()方法:用于清除画布上的矩形区域.可以用来实现一些特殊效果,如切除两个矩形相交部分.

3. 绘制路径
  - 首先调用beginPath()方法,表示要开始绘制新路径.

  - 调用方法实际地绘制路径:

    - lineTo(x,y):从当前端点开始绘制一条直线,到(x,y)为止.

    - moveTo(x,y):将绘图端点移动到(x,y),不画线.

    - rect(x,y,width,height):从(x,y)开始画一个矩形,该方法绘制的是矩形路径,而不是独立的形状.

    - arc(x,y,radius,startAngle,endAngle,counterclockwise):以(x,y)为圆心绘制一条弧线,半径为radius,起始和结束角度为startAngle和endAngle(弧度制),最后一个表示是否按逆时针方向计算,值为false表示按顺时针方向.**用来画圆的**

    - arcTo(x1,y1,x2,y2,radius):从当前端点开始绘制一条弧线,到(x2,y2)结束,并且以给定的半径穿过(x1,y1).**绘制的图弧线三个点形成的夹角相切,就是两点之间的弧线且弧线与两个点相切**

    - bezierCurveTo(c1x,c1y,c2x,c2y,x,y):从当前端点开始绘制曲线,到(x,y)为止,(c1x,c1y)和(c2x,c2y)是控制弧度的点.**三次贝塞尔曲线**

    - quadraticCurveTo(cx,cy,x,y):从当前端点开始绘制曲线,到(x,y)为止,(cx,cy)是控制弧度的点.**二次贝塞尔曲线**

  - closePath():绘制一条连接到路径起点的线条.
  
  - fill():用fillStyle填充.

  - stroke():用strokeStyle描边.

  - clip():在路径上创建一个剪切区域.

  - isPointInPath():接收x和y坐标作为参数,用于在路径被关闭之前确定画布上的某一点是否位于路径上.

4. 绘制文本:两个方法都接收四个参数,要绘制的文本字符串,x坐标,y坐标和最大像素(可选).
  - fillText()和StrokeText()方法都有三个属性:
    - font:文本样式,大小和字体.
    - textAlign:文本对齐方式:有"start","end"和"center".**水平方向**
    - textBaseline:文本的基线.**垂直方向**

5. 变换
  - rotate(angle):围绕远点旋转angle角度.

  - scale(x,y):缩放图像,x方向乘以x,y方向乘以y.
  
  - translate(x,y):将坐标原点(0,0)移动到(x,y).

  - transform():直接修改变换矩阵.**具体参数见书p453**

  - setTransform():将变换矩阵设为默认状态.再调用transform().

  - save()方法:可以将所有的设置放入栈结构.

  - restore()方法:在保存设置的栈结构中向前返回一级,恢复之前的状态.**与office中的撤销一样**

6. 绘制图像
  - drawImage()方法:接收九个参数,要绘制的图像(HTML元素),源图像x坐标,源图像y坐标,源图像宽度,源图像高度,目标图像x坐标,目标图像y坐标,目标图像宽度,目标图像高度.

  - 图像不能来自其他域,否则调用toDataURL()会报错.
