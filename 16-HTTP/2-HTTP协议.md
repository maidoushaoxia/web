## HTTP协议

1. 客户端的请求报文由请求方法、请求URI、协议版本、请求首部字段（可选）和内容实体（可选）构成。

   ```
   GET /index.htm HTTP/1.1 
   --------------------------
   Host: hackr.
   Connection: keep-alive
   Content-Type: application/x-www-form-urlencoded Content-Length: 16
   
   name=ueno&age=37
   ```

   - GET：请求访问服务器的类型，即请求方法
   -  /index.htm：请求访问的资源对象，即请求URI
   - HTTP1.1：HTTP的版本号，表示**客户端**使用的HTTP协议功能
   - 分割线以下，空行之前部分：请求首部字段

2. 服务器的响应报文由协议版本、状态码、用以解释状态码的短语、响应首部字段（可选）以及实体的主体（可选）构成。

   ```
   HTTP/1.1 200 OK
   --------------
   Date: Tue, 10 Jul 2012 06:50:15 GMT Content-Length: 362
   Content-Type: text/html
   
   <html>
   ```

   - HTTP/1.1：协议版本，表示服务器对应的HTTP版本
   - 200 OK：请求的处理结果的状态码和解释短语
   - 分割线以下，空行之前部分：响应首部字段
   - 空行之后：资源实体的主体

3. **无状态协议**：HTTP协议自身不对请求和响应之间的通信状态进行保存。为了实现保持状态功能，引入了Cookie技术。

4. 请求URI定位资源：
   - 指定请求URI：
     - 完整的请求：GET http://hackr.jp/index.htm HTTP/1.1
     - 在首部字段HOST中写明域名或IP地址：如上例。
   - 不访问特定资源，支队服务器本身发请求：用 * 代替
     - 查询服务器端支持的HTTP方法种类：`OPTIONS * HTTP/1.1`

5. HTTP方法
   - **GET：获取资源**：用来请求访问已被URI识别的资源。
   - **POST：传输实体的主体**
   - **PUT：传输文件**：在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。HTTP/1.1的PUT方法不带验证机制，有安全问题。
   - **HEAD：获得报文首部**：与GET方法一样，但是不返回报文主体部分，用于确认URI的有效性及资源更新的日期时间等。
   - **DELETE：删除文件**：按请求URI删除指定的资源，也不带验证机制。
   - **OPTIONS：询问支持的方法**：查询针对请求 URI 指定的资源支持的方法。
   - **TRACE：追踪路径**：让服务器端将之前的请求通信环回给客户端的，容易引发跨站追踪攻击。
   - **CONNECT：用隧道协议连接代理**：主要使用SSL和TLS协议将通信内容加密后经网络隧道传输。
   
6. HTTP持久连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，这样只要第一次建立了连接，后面的请求不用经过三次握手了。

7. 管线化：不用等待响应就直接发送下一个请求，即可以并行发送多个请求。

8. **Cookie：**通过在请求和响应报文中写入Cookie信息来控制客户端状态。

   - 根据服务器端发送的响应报文中Set-Cookie信息，通知客户端保存Cookie，下次客户端再往服务器发送请求时，客户端自动在请求报文中加入Cookie值再发送；
   - 服务器收到客户端的Cookie后，会检查是从哪一个客户端发来的连接请求，对比服务器的记录，就得到了之前的状态信息。

